<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Aurion v1 ‚Äî Core Memories</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{ margin:0; background:#0b0b0f; color:#e8e8f2; font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif }
    header{ padding:14px 16px; background:#141419; display:flex; justify-content:space-between; align-items:center }
    a{ color:#93c5fd; text-decoration:none }
    main{ max-width:900px; margin:16px auto; padding:0 12px }
    textarea{ width:100%; min-height:360px; padding:12px; border-radius:10px; border:1px solid #2b2f3b; background:#0f1118; color:#e8e8f2 }
    button{ margin-top:10px; padding:10px 14px; border:0; border-radius:10px; background:#3b82f6; color:#fff; font-weight:700 }
    #auth{ width:320px; padding:8px; border-radius:8px; border:1px solid #2b2f3b; background:#0f1118; color:#e8e8f2 }
  </style>
</head>
<body>
  <header>
    <div>üî• Aurion v1 ‚Äî Core Memories</div>
    <a href="/">‚Üê Back to chat</a>
  </header>
  <main>
    <p>Optional <b>Authorization secret</b> (only if you set <code>AURION_API_SECRET</code>):</p>
    <input id="auth" placeholder="Bearer secret‚Ä¶" />
    <p>Core Memories:</p>
    <textarea id="core"></textarea><br/>
    <button id="load">Load current</button>
    <button id="save">Save</button>
  </main>

  <script>
    const core = document.getElementById('core');
    const auth = document.getElementById('auth');

    function hdrs(){
      const h = { 'Content-Type':'application/json' };
      if (auth.value.trim()) h['Authorization'] = `Bearer ${auth.value.trim()}`;
      return h;
    }

    document.getElementById('load').onclick = async ()=>{
      const r = await fetch('/admin/core', { headers: hdrs() });
      const data = await r.json(); core.value = data.text || '';
      alert('Loaded.');
    };
    document.getElementById('save').onclick = async ()=>{
      const r = await fetch('/admin/set-core', {
        method:'POST', headers: hdrs(), body: JSON.stringify({ text: core.value })
      });
      const d = await r.json(); alert(d.ok ? `Saved (${d.bytes} bytes).` : 'Failed.');
    };

    // auto-load once on open
    document.getElementById('load').click();
  </script>
</body>
</html>
